import 'package:flutter_svg/svg.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:ds/theme/icons/ds_icon.dart';
import 'package:ds/theme/theme.dart';

void main() {
  var iconColor = Ds().dsColors.green300;

  testWidgets('Should build closed lock', (tester) async {
    const svgString =
        """<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.9277 15.3323C25.0244 15.3323 25.1172 15.3707 25.1855 15.4391C25.2539 15.5074 25.2923 15.6002 25.2923 15.6969V26.6344C25.2923 26.7311 25.2539 26.8238 25.1855 26.8922C25.1172 26.9605 25.0244 26.9989 24.9277 26.9989H11.0736C10.9769 26.9989 10.8841 26.9605 10.8158 26.8922C10.7474 26.8238 10.709 26.7311 10.709 26.6344V15.6969C10.709 15.6002 10.7474 15.5074 10.8158 15.4391C10.8841 15.3707 10.9769 15.3323 11.0736 15.3323H24.9277ZM24.9277 14.2385H11.0736C10.6868 14.2385 10.3159 14.3922 10.0424 14.6657C9.76888 14.9392 9.61523 15.3101 9.61523 15.6969V26.6344C9.61523 27.0211 9.76888 27.3921 10.0424 27.6656C10.3159 27.939 10.6868 28.0927 11.0736 28.0927H24.9277C25.3145 28.0927 25.6854 27.939 25.9589 27.6656C26.2324 27.3921 26.3861 27.0211 26.3861 26.6344V15.6969C26.3861 15.3101 26.2324 14.9392 25.9589 14.6657C25.6854 14.3922 25.3145 14.2385 24.9277 14.2385Z" fill="#F4EEE0"/>
<path d="M22.375 14.7854C22.2305 14.7835 22.0925 14.7253 21.9904 14.6231C21.8882 14.521 21.83 14.383 21.8281 14.2385V12.051C21.8281 11.0357 21.4248 10.062 20.7069 9.34413C19.989 8.62622 19.0153 8.2229 18 8.2229C16.9847 8.2229 16.011 8.62622 15.2931 9.34413C14.5752 10.062 14.1719 11.0357 14.1719 12.051V14.2385C14.1719 14.3836 14.1143 14.5227 14.0117 14.6252C13.9091 14.7278 13.77 14.7854 13.625 14.7854C13.48 14.7854 13.3409 14.7278 13.2383 14.6252C13.1357 14.5227 13.0781 14.3836 13.0781 14.2385V12.051C13.0781 10.7457 13.5967 9.49376 14.5197 8.57073C15.4427 7.6477 16.6946 7.12915 18 7.12915C19.3054 7.12915 20.5573 7.6477 21.4803 8.57073C22.4033 9.49376 22.9219 10.7457 22.9219 12.051V14.2385C22.92 14.383 22.8618 14.521 22.7596 14.6231C22.6575 14.7253 22.5195 14.7835 22.375 14.7854Z" fill="#F4EEE0"/>
<path d="M18 24.2645C17.8555 24.2626 17.7175 24.2044 17.6154 24.1022C17.5132 24.0001 17.455 23.8621 17.4531 23.7176V20.0718C17.4531 19.9267 17.5107 19.7876 17.6133 19.6851C17.7159 19.5825 17.855 19.5249 18 19.5249C18.145 19.5249 18.2841 19.5825 18.3867 19.6851C18.4893 19.7876 18.5469 19.9267 18.5469 20.0718V23.7176C18.545 23.8621 18.4868 24.0001 18.3846 24.1022C18.2825 24.2044 18.1445 24.2626 18 24.2645Z" fill="#F4EEE0"/>
<path d="M17.9993 21.5302C18.8048 21.5302 19.4577 20.8773 19.4577 20.0719C19.4577 19.2664 18.8048 18.6135 17.9993 18.6135C17.1939 18.6135 16.541 19.2664 16.541 20.0719C16.541 20.8773 17.1939 21.5302 17.9993 21.5302Z" fill="#F4EEE0"/>
</svg>""";

    await tester.pumpWidget(
      DsIcon(
        icon: Ds().dsIcons.closedLock,
        color: iconColor,
        size: 24,
      ),
    );

    expect(find.byType(SvgPicture), findsOneWidget);
    expect(
      find.byWidgetPredicate(
        (widget) =>
            widget is DsIcon &&
            widget.color == iconColor &&
            widget.size == 24 &&
            widget.icon.svgString == svgString,
      ),
      findsOneWidget,
    );
  });
}
